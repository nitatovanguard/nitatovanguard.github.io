export function createResizing2dCanvas(e,t,n,i,r,o=!1){const s=e.getContext("2d");let a=0,h=0,l=!1,c=!1;const d=performance.now(),g=[];let f=1;const w={setScale(e){f=e,s.setTransform(f,0,0,f,0,0)},getWidth:()=>e.width/f,getHeight:()=>e.height/f,defineObject(e){const t=g.length;return g.push(e),t},getContext:()=>s,drawInstances(e,t){t.foreach(t=>{s.setTransform(f,0,0,f,t.posX*f,t.posY*f),this.drawLineStrip(g[e])}),s.setTransform(f,0,0,f,0,0)},setPen(e,t,n=1){s.strokeStyle=e,s.fillStyle=e,s.lineWidth=t/f,s.globalAlpha=n},drawLines(e){s.beginPath();for(let t=3;t<e.length;t+=4)s.moveTo(e[t-3],e[t-2]),s.lineTo(e[t-1],e[t]);s.stroke()},drawLineStrip(e){if(!(e.length<2)){s.beginPath(),s.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t+=1)s.lineTo(e[t].x,e[t].y);s.stroke()}},drawDot(e,t){s.fillRect(e.x-t/2,e.y-t/2,t,t)},drawCircle(e,t){s.beginPath(),s.arc(e.x,e.y,t,0,2*Math.PI),s.stroke()},fillCircle(e,t){s.beginPath(),s.arc(e.x,e.y,t,0,2*Math.PI),s.fill()},screenHeight:()=>e.height,screenWidth:()=>e.width,clear(){s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,e.width,e.height),s.setTransform(f,0,0,f,0,0)}};function u(){const e=performance.now()-d;i(e,w)}function m(){t?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=window.innerWidth,e.height=window.innerHeight)}if(e.addEventListener("mousedown",e=>{0===e.button&&(l=!0),2===e.button&&(c=!0)}),e.addEventListener("mouseup",e=>{0===e.button&&(l=!1),2===e.button&&(c=!1)}),e.addEventListener("mousemove",e=>{a=e.clientX,h=e.clientY}),m(),n(w),o){const t=()=>{e.isConnected&&(requestAnimationFrame(t),u())};requestAnimationFrame(t)}else u();window.addEventListener("resize",()=>{m(),r(w)},!0)}export function createFullscreen2dCanvas(e,t,n,i,r=!1){createResizing2dCanvas(e,null,t,n,i,r)}