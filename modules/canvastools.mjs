export function createFullscreen2dCanvas(e,t,n,i,r=!1){createResizing2dCanvas(e,null,t,n,i,r)}export function createResizing2dCanvas(e,t,n,i,r,o=!1){var a=e.getContext("2d");let s=0,c=0,l=!1,d=!1;const h=performance.now(),u=[];let m=1,g={setScale(e){m=e,a.setTransform(m,0,0,m,0,0)},getWidth:()=>e.width/m,getHeight:()=>e.height/m,defineObject(e){const t=u.length;return u.push(e),t},drawInstances(e,t){for(let n of t)a.setTransform(m,0,0,m,n.posX*m,n.posY*m),this.drawLineStrip(u[e]);a.setTransform(m,0,0,m,0,0)},setPen(e,t,n=1){a.strokeStyle=e,a.fillStyle=e,a.lineWidth=t/m,a.globalAlpha=n},drawLines(e){a.beginPath();for(let t=3;t<e.length;t+=4)a.moveTo(e[t-3],e[t-2]),a.lineTo(e[t-1],e[t]);a.stroke()},drawLineStrip(e){if(!(e.length<4)){a.beginPath(),a.moveTo(e[0],e[1]);for(let t=3;t<e.length;t+=2)a.lineTo(e[t-1],e[t]);a.stroke()}},drawDot(e,t,n){a.fillRect(e-n/2,t-n/2,n,n)},drawCircle(e,t,n){a.beginPath(),a.arc(e,t,n,0,2*Math.PI),a.stroke()},fillCircle(e,t,n){a.beginPath(),a.arc(e,t,n,0,2*Math.PI),a.fill()},screenHeight:()=>e.height,screenWidth:()=>e.width,clear(){a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,e.width,e.height),a.setTransform(m,0,0,m,0,0)}};function f(){const e=performance.now()-h;i(e,g)}function w(){t?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=window.innerWidth,e.height=window.innerHeight)}if(e.addEventListener("mousedown",e=>{0==e.button&&(l=!0),2==e.button&&(d=!0)}),e.addEventListener("mouseup",e=>{0==e.button&&(l=!1),2==e.button&&(d=!1)}),e.addEventListener("mousemove",e=>{s=e.clientX,c=e.clientY}),w(),n(g),o){let t=()=>{e.isConnected&&(requestAnimationFrame(t),f())};requestAnimationFrame(t)}else f();window.addEventListener("resize",()=>{w(),r(g)},!0)}export function createWebGlScreenRectCanvas(e,t,n){e.width=window.innerWidth,e.height=window.innerHeight;let i=0,r=0,o=!1,a=!1;e.addEventListener("mousedown",e=>{0==e.button&&(o=!0),2==e.button&&(a=!0)}),e.addEventListener("mouseup",e=>{0==e.button&&(o=!1),2==e.button&&(a=!1)}),e.addEventListener("mousemove",e=>{i=e.clientX,r=e.clientY});const s=(e,t,n)=>{const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)};function c(e,t,n){e.clearColor(0,0,0,1),e.disable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(t.shaderProgram),t.u_time&&e.uniform1f(t.u_time,n/1e3),t.u_mouse&&e.uniform4f(t.u_mouse,i,r,o,a),t.u_res&&e.uniform3f(t.u_res,e.canvas.width,e.canvas.height,1);e.drawArrays(e.TRIANGLE_STRIP,0,4)}let[l,d]=function(){const n=e.getContext("webgl2");if(null===n)return void alert("Unable to initialize WebGL. Your browser or machine may not support it.");const i=((e,t,n)=>{const i=s(e,e.VERTEX_SHADER,t),r=s(e,e.FRAGMENT_SHADER,n),o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))return alert("Unable to initialize the shader program: "+e.getProgramInfoLog(o)),null;return{shaderProgram:o,u_time:e.getUniformLocation(o,"iTime"),u_mouse:e.getUniformLocation(o,"iMouse"),u_res:e.getUniformLocation(o,"iResolution")}})(n,"#version 300 es\n    \n    vec2 positions[4] = vec2[](\n        vec2(1., -1.),\n        vec2(1., 1.),\n        vec2(-1., -1.),\n        vec2(-1., 1.)\n    );\n    \n    layout (location=0) in vec2 position;\n    \n    out vec3 vColor;\n    \n    void main() {\n        vColor = position.xyx;\n    //    gl_Position = vec4(0.0,0.0,0.0,1.0);\n        gl_Position = vec4(positions[gl_VertexID], 0.0, 1.0);\n    }",t);return[n,i]}();function h(){n?(l.canvas.width=n.clientWidth,l.canvas.height=n.clientHeight):(l.canvas.width=window.innerWidth,l.canvas.height=window.innerHeight),l.viewport(0,0,l.canvas.width,l.canvas.height),c(l,d)}h(),window.addEventListener("resize",h,!0);const u=performance.now();let m=()=>{if(e.isConnected){requestAnimationFrame(m);let e=performance.now()-u;c(l,d,e)}};requestAnimationFrame(m)}