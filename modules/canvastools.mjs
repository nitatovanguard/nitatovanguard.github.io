export function createFullscreen2dCanvas(e,n,t=!1){createResizing2dCanvas(e,null,n,t)}export function createResizing2dCanvas(e,n,t,i=!1){var o=e.getContext("2d");let r=0,a=0,s=!1,c=!1;const d=[],l=performance.now();let h={setPen(e,n){o.strokeStyle=e,o.lineWidth=n},addLineLoop:e=>(d.push(e),d.length-1),drawLineLoops(e){o.beginPath();let n=d[e];o.moveTo(n[0],n[1]);for(let e=3;e<n.length;e+=2)o.lineTo(n[e-1],n[e]);o.lineTo(n[0],n[1]),o.stroke()},drawLines(e){o.beginPath();for(let n=3;n<e.length;n+=4)o.moveTo(e[n-3],e[n-2]),o.lineTo(e[n-1],e[n]);o.stroke()},drawLineStrip(e){if(!(e.length<4)){o.beginPath(),o.moveTo(e[0],e[1]);for(let n=3;n<e.length;n+=2)o.lineTo(e[n-1],e[n]);o.stroke()}},screenHeight:()=>e.height,screenWidth:()=>e.width,clear(){o.clearRect(0,0,o.canvas.width,o.canvas.height)}};function u(){const e=performance.now()-l;t(e,h)}function m(){n?(e.width=n.clientWidth,e.height=n.clientHeight):(e.width=window.innerWidth,e.height=window.innerHeight)}if(e.addEventListener("mousedown",e=>{0==e.button&&(s=!0),2==e.button&&(c=!0)}),e.addEventListener("mouseup",e=>{0==e.button&&(s=!1),2==e.button&&(c=!1)}),e.addEventListener("mousemove",e=>{r=e.clientX,a=e.clientY}),m(),i){let n=()=>{e.isConnected&&(requestAnimationFrame(n),u())};requestAnimationFrame(n)}else u();window.addEventListener("resize",m,!0)}export function createWebGlScreenRectCanvas(e,n,t){e.width=window.innerWidth,e.height=window.innerHeight;let i=0,o=0,r=!1,a=!1;e.addEventListener("mousedown",e=>{0==e.button&&(r=!0),2==e.button&&(a=!0)}),e.addEventListener("mouseup",e=>{0==e.button&&(r=!1),2==e.button&&(a=!1)}),e.addEventListener("mousemove",e=>{i=e.clientX,o=e.clientY});const s=(e,n,t)=>{const i=e.createShader(n);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)};function c(e,n,t){e.clearColor(0,0,0,1),e.disable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(n.shaderProgram),n.u_time&&e.uniform1f(n.u_time,t/1e3),n.u_mouse&&e.uniform4f(n.u_mouse,i,o,r,a),n.u_res&&e.uniform3f(n.u_res,e.canvas.width,e.canvas.height,1);e.drawArrays(e.TRIANGLE_STRIP,0,4)}let[d,l]=function(){const t=e.getContext("webgl2");if(null===t)return void alert("Unable to initialize WebGL. Your browser or machine may not support it.");const i=((e,n,t)=>{const i=s(e,e.VERTEX_SHADER,n),o=s(e,e.FRAGMENT_SHADER,t),r=e.createProgram();if(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))return alert("Unable to initialize the shader program: "+e.getProgramInfoLog(r)),null;return{shaderProgram:r,u_time:e.getUniformLocation(r,"iTime"),u_mouse:e.getUniformLocation(r,"iMouse"),u_res:e.getUniformLocation(r,"iResolution")}})(t,"#version 300 es\n    \n    vec2 positions[4] = vec2[](\n        vec2(1., -1.),\n        vec2(1., 1.),\n        vec2(-1., -1.),\n        vec2(-1., 1.)\n    );\n    \n    layout (location=0) in vec2 position;\n    \n    out vec3 vColor;\n    \n    void main() {\n        vColor = position.xyx;\n    //    gl_Position = vec4(0.0,0.0,0.0,1.0);\n        gl_Position = vec4(positions[gl_VertexID], 0.0, 1.0);\n    }",n);return[t,i]}();function h(){t?(d.canvas.width=t.clientWidth,d.canvas.height=t.clientHeight):(d.canvas.width=window.innerWidth,d.canvas.height=window.innerHeight),d.viewport(0,0,d.canvas.width,d.canvas.height),c(d,l)}h(),window.addEventListener("resize",h,!0);const u=performance.now();let m=()=>{if(e.isConnected){requestAnimationFrame(m);let e=performance.now()-u;c(d,l,e)}};requestAnimationFrame(m)}