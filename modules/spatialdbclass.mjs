import{V2 as i}from"./v2.mjs";export class SpatialDB{constructor(){this.items=[]}forEach(i){this.items.forEach(i)}size(){return this.items.length}add(i){this.items.push(i)}removeItem(i){this.items.splice(this.items.indexOf(i),1)}removeByIndex(i){this.items.splice(i,1)}removeAllMatching(i){this.items=this.items.filter(t=>!i(t))}findFirstInRadius(i,t,s=(()=>!0)){return this.items.find(e=>e.pos.getSqDist(i)<t**2&&s(e))}findAllInRadius(i,t,s=(()=>!0)){return this.items.filter(e=>e.pos.getSqDist(i)<t**2&&s(e))}indexOf(i){return this.items.indexOf(i)}findMaximumInRadius(i,t,s,e=(()=>!0)){let r=this.findAllInRadius(i,t,e);return r.length?r.reduce((i,t)=>s(i,t)>0?i:t):null}findNearestInRadius(i,t,s=(()=>!0)){return this.findMaximumInRadius(i,t,(t,s)=>s.pos.sub(i).sqLength()-t.pos.sub(i).sqLength(),s)}filter(i){return this.items.filter(i())}}export default{SpatialDB};